<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Merge</title>
  <link href="/codemirror/lib/codemirror.css" rel="stylesheet">
  <link href="/codemirror/addon/merge/merge.css" rel="stylesheet">
  <link href="/codemirror/theme/3024-day.css" rel="stylesheet">
  <link href="/codemirror/theme/3024-night.css" rel="stylesheet">
  <link href="/codemirror/theme/abcdef.css" rel="stylesheet">
  <link href="/codemirror/theme/ambiance.css" rel="stylesheet">
  <link href="/codemirror/theme/base16-dark.css" rel="stylesheet">
  <link href="/codemirror/theme/bespin.css" rel="stylesheet">
  <link href="/codemirror/theme/base16-light.css" rel="stylesheet">
  <link href="/codemirror/theme/blackboard.css" rel="stylesheet">
  <link href="/codemirror/theme/cobalt.css" rel="stylesheet">
  <link href="/codemirror/theme/colorforth.css" rel="stylesheet">
  <link href="/codemirror/theme/dracula.css" rel="stylesheet">
  <link href="/codemirror/theme/eclipse.css" rel="stylesheet">
  <link href="/codemirror/theme/elegant.css" rel="stylesheet">
  <link href="/codemirror/theme/erlang-dark.css" rel="stylesheet">
  <link href="/codemirror/theme/hopscotch.css" rel="stylesheet">
  <link href="/codemirror/theme/icecoder.css" rel="stylesheet">
  <link href="/codemirror/theme/isotope.css" rel="stylesheet">
  <link href="/codemirror/theme/lesser-dark.css" rel="stylesheet">
  <link href="/codemirror/theme/liquibyte.css" rel="stylesheet">
  <link href="/codemirror/theme/material.css" rel="stylesheet">
  <link href="/codemirror/theme/mbo.css" rel="stylesheet">
  <link href="/codemirror/theme/mdn-like.css" rel="stylesheet">
  <link href="/codemirror/theme/midnight.css" rel="stylesheet">
  <link href="/codemirror/theme/monokai.css" rel="stylesheet">
  <link href="/codemirror/theme/neat.css" rel="stylesheet">
  <link href="/codemirror/theme/neo.css" rel="stylesheet">
  <link href="/codemirror/theme/night.css" rel="stylesheet">
  <link href="/codemirror/theme/panda-syntax.css" rel="stylesheet">
  <link href="/codemirror/theme/paraiso-dark.css" rel="stylesheet">
  <link href="/codemirror/theme/paraiso-light.css" rel="stylesheet">
  <link href="/codemirror/theme/pastel-on-dark.css" rel="stylesheet">
  <link href="/codemirror/theme/railscasts.css" rel="stylesheet">
  <link href="/codemirror/theme/rubyblue.css" rel="stylesheet">
  <link href="/codemirror/theme/seti.css" rel="stylesheet">
  <link href="/codemirror/theme/solarized.css" rel="stylesheet">
  <link href="/codemirror/theme/the-matrix.css" rel="stylesheet">
  <link href="/codemirror/theme/tomorrow-night-bright.css" rel="stylesheet">
  <link href="/codemirror/theme/tomorrow-night-eighties.css" rel="stylesheet">
  <link href="/codemirror/theme/ttcn.css" rel="stylesheet">
  <link href="/codemirror/theme/twilight.css" rel="stylesheet">
  <link href="/codemirror/theme/vibrant-ink.css" rel="stylesheet">
  <link href="/codemirror/theme/xq-dark.css" rel="stylesheet">
  <link href="/codemirror/theme/xq-light.css" rel="stylesheet">
  <link href="/codemirror/theme/yeti.css" rel="stylesheet">
  <link href="/codemirror/theme/zenburn.css" rel="stylesheet">
  <link href="/codemirror/addon/hint/show-hint.css" rel="stylesheet">
  <link href="/codemirror/addon/lint/lint.css" rel="stylesheet">
  <link href="/codemirror/addon/fold/foldgutter.css" rel="stylesheet">
  <link href="/codemirror/addon/dialog/dialog.css" rel="stylesheet">
  <link href="/codemirror/addon/search/matchesonscrollbar.css" rel="stylesheet">
  <script src="/codemirror/lib/codemirror.js"></script>
  <script src="/codemirror/addon/selection/active-line.js"></script>
  <script src="/codemirror/addon/edit/closebrackets.js"></script>
  <script src="/codemirror/addon/edit/matchbrackets.js"></script>
  <script src="/codemirror/addon/edit/closetag.js"></script>
  <script src="/codemirror/addon/edit/trailingspace.js"></script>
  <script src="/codemirror/addon/hint/show-hint.js"></script>
  <script src="/codemirror/addon/hint/anyword-hint.js"></script>
  <script src="/codemirror/addon/lint/lint.js"></script>
  <script src="/codemirror/addon/lint/json-lint.js"></script>
  <script src="/codemirror/addon/lint/javascript-lint.js"></script>
  <script src="/codemirror/addon/lint/css-lint.js"></script>
  <script src="/codemirror/addon/fold/foldcode.js"></script>
  <script src="/codemirror/addon/fold/foldgutter.js"></script>
  <script src="/codemirror/addon/fold/brace-fold.js"></script>
  <script src="/codemirror/addon/fold/xml-fold.js"></script>
  <script src="/codemirror/addon/fold/markdown-fold.js"></script>
  <script src="/codemirror/addon/fold/comment-fold.js"></script>
  <script src="/codemirror/addon/display/autorefresh.js"></script>
  <script src="/codemirror/addon/display/rulers.js"></script>
  <script src="/codemirror/addon/display/panel.js"></script>
  <script src="/codemirror/addon/comment/comment.js"></script>
  <script src="/codemirror/addon/dialog/dialog.js"></script>
  <script src="/codemirror/addon/search/jump-to-line.js"></script>
  <script src="/codemirror/addon/search/searchcursor.js"></script>
  <script src="/codemirror/addon/search/search.js"></script>
  <script src="/codemirror/addon/search/match-highlighter.js"></script>
  <script src="/codemirror/addon/search/matchesonscrollbar.js"></script>
  <script src="/codemirror/addon/scroll/annotatescrollbar.js"></script>
  <script src="/codemirror/addon/mode/loadmode.js"></script>
  <script src="/codemirror/mode/javascript/javascript.js"></script>
  <script src="/codemirror/mode/htmlmixed/htmlmixed.js"></script>
  <script src="/codemirror/addon/mode/simple.js"></script>
  <script src="/codemirror/addon/mode/overlay.js"></script>
  <script src="/codemirror/addon/mode/multiplex.js"></script>
  <script src="/codemirror/mode/meta.js"></script>
  <script src="/codemirror/addon/merge/merge.js"></script>
  <script src="/codemirror/addon/merge/merge.js"></script>
  <script src="/codemirror/addon/merge/merge.js"></script>
  <script src="/jquery/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/diff_match_patch/20121119/diff_match_patch.js"></script>
<style>
    .CodeMirror { line-height: 1.2; }
    @media screen and (min-width: 1300px) {
      article { max-width: 1000px; }
      #nav { border-right: 499px solid transparent; }
    }
    span.clicky {
      cursor: pointer;
      background: #d70;
      color: white;
      padding: 0 3px;
      border-radius: 3px;
    }
</style>
</head>
<body>

<div id="view"></div>

<script>
function resizeEditor() {
  var h = $(window).height() - 20;
  $("div.CodeMirror").height(h);
  $("div.CodeMirror-merge-editor").height(h);
  $("div.CodeMirror-merge").height(h);
  $("div.view").height(h);
}

var value, orig1, orig2, dv, panes = 2, highlight = true, connect = "align", collapse = true;
function initUI() {
  if (value == null) return;
  var target = document.getElementById("view");
  target.innerHTML = "";
  dv = CodeMirror.MergeView(target, {
    value: value,
    origLeft: panes == 3 ? orig1 : null,
    orig: orig2,
    lineNumbers: true,
    mode: "text/html",
    highlightDifferences: highlight,
    connect: connect,
    collapseIdentical: collapse
  });
  resizeEditor();
}

function toggleDifferences() {
  dv.setShowDifferences(highlight = !highlight);
}

$(window).resize(function() {
  resizeEditor();
});

window.onload = function() {
  value = "aaa\nbbbbb\nccccc";
  orig1 = "aaa\nbbbbb\nccccc";
  orig2 = "aaa\nddddddd\nccccc\neeeeeeeee";
  initUI();
  let d = document.createElement("div");
  d.style.cssText = "width: 50px; margin: 7px; height: 14px";
  dv.editor().addLineWidget(57, d)
};

</script>

</body>
</html>

